import{f as H,a as F,g as U,r as f,j as e,N as $,I as P,F as O,h as A,i as C,e as x,k as M,B as _,P as I,u as V,l as z,L as G,m as Z,n as Q}from"./index-BHDXc9hy.js";const W=H.injectEndpoints({endpoints:s=>({getAHotelForAdmin:s.query({query:i=>`hotel/get-a-hotel-for-owner/${i.hotel_id}`,transformResponse:i=>i.response,providesTags:["single-hotel-owner"]})})}),{useGetAHotelForAdminQuery:J}=W,K=s=>{const i=F(),{data:t,isError:n,isFetching:d,isLoading:m,isSuccess:u}=J({hotel_id:s});if(u){const{hotelName:j,images:N,location:w,description:v}=t;i(U({hotelName:j,images:N,location:w,description:v}))}return{hotel:t,isError:n,isFetching:d,isLoading:m,isSuccess:u}},X=H.injectEndpoints({endpoints:s=>({editHotelDetails:s.mutation({query:i=>({url:`/hotel/edit-hotel-details/${i._id}`,method:"PUT",body:i}),invalidatesTags:["single-hotel-owner"]}),editHotelLocation:s.mutation({query:i=>({url:`/hotel/edit-hotel-location/${i._id}`,method:"PUT",body:i}),invalidatesTags:["single-hotel-owner"]}),editHotelDescription:s.mutation({query:i=>({url:`/hotel/edit-hotel-description/${i._id}`,method:"PUT",body:i}),invalidatesTags:["single-hotel-owner"]}),removeHotelImage:s.mutation({query:i=>({url:`/hotel/delete-image/${i.hotel_id}/${i.imageToBeRemoved}`,method:"DELETE"}),invalidatesTags:["single-hotel-owner"]}),addImages:s.mutation({query:i=>({url:"/hotel/add-images",method:"PUT",body:i}),invalidatesTags:["single-hotel-owner"]})})}),{useEditHotelDetailsMutation:Y,useEditHotelLocationMutation:ee,useEditHotelDescriptionMutation:se,useRemoveHotelImageMutation:ie,useAddImagesMutation:te}=X,oe=({image:s,index:i,hotel_id:t})=>{const[n,{isError:d,isLoading:m,isSuccess:u,reset:j}]=ie(),N=f.useRef(null),[w,v]=f.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx($,{isModalOpen:w,setIsModalOpen:v,heading:"Do you want to delete this Image?",description:"image will be deleted from hotel",buttonText:"Delete",args:{hotel_id:t,imageToBeRemoved:N.current},sendRequestHandler:n,error:d,loading:m,success:u,reset:j}),e.jsx("div",{className:"border-2  border-black  h-[200px] w-[300px] rounded-md",style:{backgroundImage:`url(${P}/${s})`},children:e.jsx("svg",{onClick:()=>{N.current=s,v(!0)},xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"red",className:"w-6 h-6 relative left-60 top-8 cursor-pointer",children:e.jsx("path",{fillRule:"evenodd",d:"M16.5 4.478v.227a48.816 48.816 0 0 1 3.878.512.75.75 0 1 1-.256 1.478l-.209-.035-1.005 13.07a3 3 0 0 1-2.991 2.77H8.084a3 3 0 0 1-2.991-2.77L4.087 6.66l-.209.035a.75.75 0 0 1-.256-1.478A48.567 48.567 0 0 1 7.5 4.705v-.227c0-1.564 1.213-2.9 2.816-2.951a52.662 52.662 0 0 1 3.369 0c1.603.051 2.815 1.387 2.815 2.951Zm-6.136-1.452a51.196 51.196 0 0 1 3.273 0C14.39 3.05 15 3.684 15 4.478v.113a49.488 49.488 0 0 0-6 0v-.113c0-.794.609-1.428 1.364-1.452Zm-.355 5.945a.75.75 0 1 0-1.5.058l.347 9a.75.75 0 1 0 1.499-.058l-.346-9Zm5.48.058a.75.75 0 1 0-1.498-.058l-.347 9a.75.75 0 0 0 1.5.058l.345-9Z",clipRule:"evenodd"})})},i)]})},q=({images:s,hotel_id:i})=>(console.log(s),e.jsx("div",{className:"border-2  max-h-[300px] overflow-scroll p-[5%]",children:e.jsx("div",{className:"min-h-[200px] ms-28 md:ms-0  flex  flex-wrap gap-3 justify-left w-full",children:s==null?void 0:s.map((t,n)=>e.jsx(oe,{image:t,index:n,hotel_id:i}))})}));function ne({inputModalOpen:s,setInputModalOpen:i,InputDetailsToPass:t,_id:n}){const[d,{isError:m,isLoading:u,isSuccess:j}]=Y(),[N,{isError:w,isLoading:v,isSuccess:b}]=ee(),[l,{isError:p,isLoading:g,isSuccess:o}]=se(),a=()=>i(!s),{name:r,value:y}=t;console.log(y,r);const L=async c=>{try{const h=r==="hotelName"?await d(c):r==="location"?await N(c):r==="description"?await l(c):null;console.log(h),a()}catch(h){console.log(h)}};return e.jsx(e.Fragment,{children:e.jsx(O,{initialValues:r==="hotelName"?{hotelName:y}:r==="location"?{location:y}:r==="description"?{description:y}:null,validationSchema:A().shape({hotelName:C().min(8,"hotelname should be 6 chars minimum").required("hotelname is required")}),onSubmit:c=>{console.log(c),_onSave(c)},children:({values:c,errors:h,touched:R,handleChange:S,setFieldValue:E,handleBlur:T,handleSubmit:B,isSubmitting:Ne})=>e.jsx("form",{onSubmit:B,action:"",children:e.jsxs(x.Dialog,{open:s,size:"xs",handler:a,children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"mr-3 h-5 w-5",onClick:a,children:e.jsx("path",{fillRule:"evenodd",d:"M5.47 5.47a.75.75 0 011.06 0L12 10.94l5.47-5.47a.75.75 0 111.06 1.06L13.06 12l5.47 5.47a.75.75 0 11-1.06 1.06L12 13.06l-5.47 5.47a.75.75 0 01-1.06-1.06L10.94 12 5.47 6.53a.75.75 0 010-1.06z",clipRule:"evenodd"})})}),e.jsx(x.DialogBody,{children:e.jsxs("div",{className:"grid gap-6",children:[e.jsx(x.Typography,{className:"-mb-1",color:"blue-gray",variant:"h6",children:"No of rooms needed"}),r!="description"?e.jsx(M,{name:r,onChange:S,value:r==="location"?c==null?void 0:c.location:r==="hotelName"?c==null?void 0:c.hotelName:null,onBlur:T,error:h.description&&R.description&&h.description,success:!h.description&&R.description,width:"lg",label:t.label}):e.jsx(x.Textarea,{name:r,onChange:S,value:c.description,onBlur:T,error:h.description&&R.description&&h.description,success:!h.description&&R.description,width:"lg",label:t.label,children:r})]})}),e.jsx(x.DialogFooter,{className:"space-x-2",children:e.jsx(_,{onClick:()=>{const k=h.description;if(console.log(k),!k){if(r==="description"){const D=c.description;L({_id:n,description:D})}else if(r==="hotelName"){const D=c.hotelName;L({_id:n,hotelName:D})}else if(r==="location"){const D=c.location;L({_id:n,location:D})}}},type:"submit",value:"submit",variant:"gradient",color:"gray",children:"send message"})})]})})})})}const ae=({hotel:s,isLoading:i})=>{const[t,n]=f.useState(!1),[d,m]=f.useState(null),[u,j]=f.useState(null),[N,{isError:w,isLoading:v,isSuccess:b}]=te(),l=async p=>{try{const g=await N(p);console.log(g),j(null)}catch(g){console.log(g)}};return e.jsxs(e.Fragment,{children:[t&&e.jsx(ne,{inputModalOpen:t,setInputModalOpen:n,InputDetailsToPass:d,_id:s==null?void 0:s._id}),e.jsxs("div",{className:"grid grid-rows-[auto,auto,auto,auto] gap-10 grid-flow-col  p-4",children:[e.jsx("div",{className:" flex justify-start items-center p-2",children:"Hotel Name"}),e.jsx("div",{className:" flex justify-start items-center p-2",children:"Location"}),e.jsx("div",{className:" flex justify-start items-center p-2",children:"Description"}),e.jsx("div",{className:" flex justify-start items-center p-2",children:"upload images"}),e.jsx("div",{className:"p-3  text-[0.9rem]",children:i?e.jsx(x.Spinner,{className:"h-6 w-6 relative left-16"}):s==null?void 0:s.hotelName}),e.jsx("div",{className:"p-3 text-[0.9rem]",children:s==null?void 0:s.location}),e.jsx("div",{className:"max-w-[500px] p-3 text-[0.9rem]",children:s==null?void 0:s.description}),e.jsx("div",{className:"max-w-[500px] p-3 text-[0.9rem]",children:e.jsx(x.Input,{onChange:p=>{j(p.target.files)},size:"sm",className:"w-[50%]",type:"file",accept:"image/*",multiple:!0})}),e.jsx("div",{className:" flex justify-center",children:e.jsx(I,{onClick:()=>{n(!0),m({name:"hotelName",label:"hotel name",type:"text",value:s==null?void 0:s.hotelName})},width:15,className:"cursor-pointer me-6"})}),e.jsx("div",{className:"flex justify-center",children:e.jsx(I,{onClick:()=>{n(!0),m({name:"location",label:"Location",type:"text",value:s==null?void 0:s.location})},width:15,className:"cursor-pointer me-6"})}),e.jsx("div",{className:"flex justify-center",children:e.jsx(I,{onClick:()=>{n(!0),m({name:"description",label:"description",type:"text",value:s==null?void 0:s.description})},width:15,className:"cursor-pointer me-6"})}),e.jsx("div",{className:"flex justify-center",children:e.jsx("svg",{onClick:()=>{const p=new FormData;p.set("hotel_id",s==null?void 0:s._id),console.log(u);for(var g=0;g<u.length;g++)p.append("images",u[g]);console.log(p),l(p)},xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6 mt-4 -ms-5 cursor-pointer",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5m-13.5-9L12 3m0 0 4.5 4.5M12 3v13.5"})})})]})]})},le=({hotel_id:s})=>{F();const{hotel:i,isError:t,isFetching:n,isLoading:d,isSuccess:m}=K(s);return V(z),f.useState(!1),f.useState(null),e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"",children:[e.jsxs("div",{className:"flex justify-around border-2 ps-28",children:[e.jsx("h2",{className:"p-5 text-center text-xl  ms-[15%]",children:"Hotel Details"}),e.jsxs("h2",{className:"p-5 pt-7 text-center text-blue-900 text-[0.8rem]",children:[e.jsx(G,{to:`/owner/review/${s}`,children:"View Reviews"})," "]})]}),e.jsx(ae,{hotel:i,isLoading:d})]}),e.jsxs("div",{className:"flex flex-col items-center border-2 mt-5",children:[e.jsx("div",{className:"flex",children:e.jsx("h2",{className:" text-xl  w-full text-center py-3",children:"Hotel Images"})}),e.jsx("div",{className:"",children:e.jsx(q,{images:i==null?void 0:i.images,hotel_id:s})})]})]})},re=Z.injectEndpoints({endpoints:s=>({getAllRoomsOfHotel:s.query({query:i=>`/room/get-rooms/${i.hotel_id}`,transformResponse:i=>i.response,providesTags:["get-rooms-of-hotel"]})})}),{useGetAllRoomsOfHotelQuery:ce}=re,de=s=>{const{data:i,isError:t,isFetching:n,isLoading:d,isSuccess:m}=ce({hotel_id:s});return{rooms:i,isError:t,isFetching:n,isLoading:d,isSuccess:m}},me=H.injectEndpoints({endpoints:s=>({editRoomDescription:s.mutation({query:i=>({url:`/room/edit-room-description/${i._id}`,method:"PUT",body:i}),invalidatesTags:["get-rooms-of-hotel"]}),addRoomImages:s.mutation({query:i=>({url:`/room/add-images/${i.get("room_id")}`,method:"PUT",body:i,FormData:!0}),invalidatesTags:["get-rooms-of-hotel"]}),updateRoomNumber:s.mutation({query:i=>({url:`/room/update-room-number/${i.room_id}`,method:"PUT",body:i,FormData:!0}),invalidatesTags:["get-rooms-of-hotel"]})})}),{useEditRoomDescriptionMutation:ue,useAddRoomImagesMutation:pe,useUpdateRoomNumberMutation:xe}=me;function ge({inputModalOpen:s,setInputModalOpen:i,InputDetailsToPass:t,_id:n}){const[d,{isError:m,isLoading:u}]=ue(),[j,{isError:N,isLoading:w,isSuccess:v}]=xe(),b=()=>i(!s),{name:l,value:p}=t;console.log(p,l);const g=async o=>{try{const a=l==="description"?await d(o):l==="noOfRooms"?await j(o):null;console.log(a),console.log(l),b()}catch(a){console.log(a)}};return e.jsx(e.Fragment,{children:e.jsx(O,{initialValues:l==="description"?{description:p}:l==="noOfRooms"?{noOfRooms:p}:null,validationSchema:A().shape(l==="description"?{description:C().min(8,"hotelname should be 6 chars minimum").required("hotelname is required")}:null),onSubmit:o=>{console.log(o),_onSave(o)},children:({values:o,errors:a,touched:r,handleChange:y,setFieldValue:L,handleBlur:c,handleSubmit:h,isSubmitting:R})=>e.jsx("form",{onSubmit:h,action:"",children:e.jsxs(x.Dialog,{open:s,size:"xs",handler:b,children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"mr-3 h-5 w-5",onClick:b,children:e.jsx("path",{fillRule:"evenodd",d:"M5.47 5.47a.75.75 0 011.06 0L12 10.94l5.47-5.47a.75.75 0 111.06 1.06L13.06 12l5.47 5.47a.75.75 0 11-1.06 1.06L12 13.06l-5.47 5.47a.75.75 0 01-1.06-1.06L10.94 12 5.47 6.53a.75.75 0 010-1.06z",clipRule:"evenodd"})})}),e.jsx(x.DialogBody,{children:e.jsxs("div",{className:"grid gap-6",children:[e.jsx(x.Typography,{className:"-mb-1",color:"blue-gray",variant:"h6",children:"No of rooms needed"}),l!="description"?e.jsx(M,{name:l,onChange:y,value:l==="noOfRooms"?o==null?void 0:o.noOfRooms:l==="hotelName"?o==null?void 0:o.hotelName:null,onBlur:c,error:l==="description"&&a.description&&r.description&&a.description,success:!a.description&&r.description,width:"lg",label:t.label}):e.jsx(x.Textarea,{name:l,onChange:y,value:o.description,onBlur:c,error:a.description&&r.description&&a.description,success:!a.description&&r.description,width:"lg",label:t.label,children:l})]})}),e.jsx(x.DialogFooter,{className:"space-x-2",children:e.jsx(_,{onClick:()=>{const S=a.description;if(console.log(S),!S){if(l==="description"){const E=o.description;g({_id:n,description:E})}else if(l==="noOfRooms"){const E=o.noOfRooms;g({room_id:n,noOfRooms:E})}}},type:"submit",value:"submit",variant:"gradient",color:"gray",children:"send message"})})]})})})})}const he=({room:s})=>{const[i,t]=f.useState(!1);f.useRef(null),f.useState(null);const[n,d]=f.useState(null),[m,u]=f.useState([]),j=s==null?void 0:s._id,[N,{isError:w,isLoading:v,isSuccess:b,reset:l,error:p}]=pe({room_id:j}),g=async o=>{try{const a=await N(o);console.log(a)}catch(a){console.log(a)}};return e.jsxs(e.Fragment,{children:[i&&e.jsx(ge,{inputModalOpen:i,setInputModalOpen:t,InputDetailsToPass:n,_id:s==null?void 0:s._id}),e.jsxs("div",{className:"grid grid-rows-[auto,auto,auto,auto] gap-3 grid-flow-col  p-4",children:[e.jsx("div",{className:" flex justify-start items-center p-2",children:"Description"}),e.jsx("div",{className:" flex justify-start items-center p-2",children:"No of Rooms"}),e.jsx("div",{className:" flex justify-start items-center p-2",children:"Description"}),e.jsx("div",{className:" flex justify-start items-center p-2",children:"upload images"}),e.jsx("div",{className:"p-3  text-[0.9rem] ",children:e.jsx("h2",{className:"max-w-[500px]",children:s==null?void 0:s.description})}),e.jsx("div",{className:"p-3 text-[0.9rem]",children:s==null?void 0:s.noOfRooms}),e.jsx("div",{className:"max-w-[500px] p-3 text-[0.9rem]",children:""}),e.jsx("div",{className:"max-w-[500px] p-3 text-[0.9rem]",children:e.jsx(x.Input,{onInput:o=>{u(o.target.files)},size:"sm",className:"w-[50%]",type:"file",accept:"image/*",multiple:!0})}),e.jsx("div",{className:" flex justify-center",children:e.jsx(I,{onClick:()=>{t(!0),d({name:"description",label:"room description",type:"text",value:s==null?void 0:s.description})},width:15,className:"cursor-pointer me-6"})}),e.jsx("div",{className:"flex justify-center",children:e.jsx(I,{onClick:()=>{t(!0),d({name:"noOfRooms",label:"noOfRooms",type:"number",value:s==null?void 0:s.noOfRooms})},width:15,className:"cursor-pointer me-6"})}),e.jsx("div",{className:"flex justify-center"}),e.jsx("div",{className:"flex justify-center",children:e.jsx("svg",{onClick:()=>{const o=new FormData;o.set("room_id",s==null?void 0:s._id),console.log(m);for(var a=0;a<m.length;a++)o.append("images",m[a]);console.log(o),g(o)},xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6 mt-4 -ms-5",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5m-13.5-9L12 3m0 0 4.5 4.5M12 3v13.5"})})})]})]})},je=({room:s})=>{const{roomType:i,images:t,description:n}=s;return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("div",{className:" mt-3 h-[60px] flex items-center justify-between border-2",children:e.jsx("h1",{className:"font-bold ms-4",children:i})}),e.jsx(he,{room:s}),e.jsx(q,{images:t})]})})},fe=({hotel_id:s})=>{const{rooms:i,isError:t,isFetching:n,isLoading:d,isSuccess:m}=de(s);return d?e.jsx("h1",{children:e.jsx(x.Spinner,{className:"h-12 w-12"})}):e.jsx("div",{className:"flex flex-grow flex-col",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("h2",{className:"font-bold text-xl text-center  w-full",children:"Room Details"}),console.log(i),i==null?void 0:i.map((u,j)=>e.jsx(je,{room:u},u==null?void 0:u._id))]})})},we=()=>{const{hotel_id:s}=Q();return e.jsxs("div",{className:"flex flex-col flex-grow m-[5%]",children:[e.jsx("div",{className:"border-2",children:e.jsx(le,{hotel_id:s})}),e.jsx("div",{className:"border-2 mt-[100px]",children:e.jsx("div",{children:e.jsx(fe,{hotel_id:s})})})]})};export{we as default};
